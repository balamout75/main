import java.rmi.RemoteException;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.TreeSelectionListener;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.tree.*;
import java.util.ArrayList;


/**
 *
 * @author  Иван
 */
public class DataModuleEditorPanel extends javax.swing.JPanel {
    static int alter     = 1;
    static int nonalter  = 2;
    static int free      = 3;


    private INIACRMIInterface   Server;
    private AnswerMark AM;

    Integer DictionaryIndex;
    private DictionaryInterface DI=null;

    private javax.swing.DefaultListModel listDictionary;

    private JPopupMenu jTreeMenu;
    private JPopupMenu jTreeMenuItemDictionary;
    private JPopupMenu jTreeMenuItemQuestion;
    private JPopupMenu jTreeMenuItemAnswer;

    private JPopupMenu jTreeMenuItemDataBlock;
    //private JPopupMenu jTreeMenuItemDataFolder;
    private JPopupMenu jTreeMenuItemDataModule;
    private JPopupMenu jTreeMenuItemDataFilter;
    private JPopupMenu jTreeMenuItemData;

    private DataModuleInterface DataRoot;
    private RInterface RDMI;

    private DQAMarkInterface nodeInfo;
    private DefaultMutableTreeNode node;
    public  DefaultMutableTreeNode DItop=null;
    public  ABSortTreeNode top=null;

    private JMenu jTreeQuestType;
    private javax.swing.JRadioButtonMenuItem jRadioButtonMenuItem1;
    private javax.swing.JRadioButtonMenuItem jRadioButtonMenuItem2;
    private javax.swing.JRadioButtonMenuItem jRadioButtonMenuItem3;
    private Library Lib;
    public  boolean DEPopened=false;


    public Library getLibrary(){
        return Lib;
    }
    
    public class InternalFrameEventDemo implements FocusListener {

        public void focusGained(FocusEvent e) {
            //Lib.setTypeOfToolbar(5);
        }

        public void focusLost(FocusEvent e) {
            //System.out.println("Internal frame LostFocus");
        }

    }

    public DataModuleInterface getDMI( ) {
        return DataRoot;  
    }
    
    class RadioListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
           try {
            System.out.println(e.getActionCommand());
            String Value=(e.getActionCommand());
            nodeInfo = (DQAMarkInterface)node.getUserObject();
            QuestMark QM = (QuestMark)nodeInfo;
            if (Value.equalsIgnoreCase("1")) {
                jTreeQuestType.setText("Альтернативный");
                if (jRadioButtonMenuItem1.isSelected()) {
                    jRadioButtonMenuItem2.setSelected(false);
                    jRadioButtonMenuItem3.setSelected(false);
                    System.out.println("Делаем текущий вопрос альтернативным");
                    QM.getQI().setQuestionType(alter, true);
                } else jRadioButtonMenuItem1.setSelected(true);
            } else  if (Value.equalsIgnoreCase("2")) {
                        jTreeQuestType.setText("Неальтернативный");
                        if (jRadioButtonMenuItem2.isSelected()) {
                            jRadioButtonMenuItem1.setSelected(false);
                            jRadioButtonMenuItem3.setSelected(false);
                            System.out.println("Делаем текущий вопрос неальтернативным");
                            QM.getQI().setQuestionType(nonalter, true);
                        } else jRadioButtonMenuItem2.setSelected(true);
                    } else {jTreeQuestType.setText("Иной");
                            if (jRadioButtonMenuItem3.isSelected()) {
                                jRadioButtonMenuItem1.setSelected(false);
                                jRadioButtonMenuItem2.setSelected(false);
                                System.out.println("Делаем текущий вопрос свободным");
                                QM.getQI().setQuestionType(free, true);
                            } else jRadioButtonMenuItem3.setSelected(true);
                    }}
           catch( Exception e2 )	{
	    System.out.println( e2.toString() );
	    System.exit(1);
	}
        }
    }


    public DataModuleEditorPanel(Library aLib, INIACRMIInterface aServer) {
	try
	{
            Lib = aLib;
            Server = aServer;
            initComponents();
            tuneComponent();
	}
	catch( Exception e )
	{
	    System.out.println( e.toString() );
	    System.exit(1);
	}
    }

    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        DictionaryPanel = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jScrollPane4 = new javax.swing.JScrollPane();
        jTree1 = new javax.swing.JTree();

        setLayout(new java.awt.GridBagLayout());

        DictionaryPanel.setPreferredSize(new java.awt.Dimension(0, 0));
        DictionaryPanel.setLayout(new java.awt.GridBagLayout());

        jPanel1.setPreferredSize(new java.awt.Dimension(200, 200));
        jPanel1.setLayout(new javax.swing.BoxLayout(jPanel1, javax.swing.BoxLayout.LINE_AXIS));

        jPanel2.setLayout(new javax.swing.BoxLayout(jPanel2, javax.swing.BoxLayout.LINE_AXIS));

        jTree1.setEditable(true);
        jTree1.addInputMethodListener(new java.awt.event.InputMethodListener() {
            public void caretPositionChanged(java.awt.event.InputMethodEvent evt) {
            }
            public void inputMethodTextChanged(java.awt.event.InputMethodEvent evt) {
                jTree1InputMethodTextChanged(evt);
            }
        });
        jScrollPane4.setViewportView(jTree1);

        jPanel2.add(jScrollPane4);

        jPanel1.add(jPanel2);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        DictionaryPanel.add(jPanel1, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        add(DictionaryPanel, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents
    
    public void NewAnswer(){
        try {
            DQAMarkInterface DQABranch1=(DQAMarkInterface)node.getUserObject();
            QuestMark QM = (QuestMark)DQABranch1;
            Integer Key = Server.getKey();
            Server.getMainQuestion().newAnswer("New аnswer",Key,true);
            QuestionInterface QI = QM.getQI();
            QI.addElement(Key,Lib.getID(),true);
            refreshBranch(node,2);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    public void CheckDictionaryTree(){
        try {
            refreshBranch((DefaultMutableTreeNode)jTree1.getModel().getRoot(),2);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    public void NewDictionary(){
        try {
            Integer Key = Server.getKey();
            DictionaryInterface DI=Server.newDictionary("New dictionary",Key, true);
            DataModuleMark DIfo = (DataModuleMark)nodeInfo;
            DIfo.getDMI().setDictionary(Key,Lib.getID(),true);
            setDictionary(DI);
            //CheckDictionaryTree();
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }


    public void NewQuestion(){
        try {
            DQAMarkInterface DQABranch1=(DQAMarkInterface)node.getUserObject();
            DictionaryMark DM = (DictionaryMark)DQABranch1;
            Integer Key = Server.getKey();
            Server.getMainDictionary().newQuestion("New question",Key,true);
            DictionaryInterface DI = DM.getQI();
            //"Новый вопрос" который работает
            DI.addElement(Key,Lib.getID(),true);
            refreshBranch(node,2);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    private void RefreshQuestType(QuestionInterface QI) {
        try {
                int Value = QI.getQuestionType();
                if (Value==alter) {
                    jRadioButtonMenuItem1.setSelected(true);
                    jRadioButtonMenuItem2.setSelected(false);
                    jRadioButtonMenuItem3.setSelected(false);
                    jTreeQuestType.setText("Альтернативный");
                } else  if (Value==nonalter) {
                        jRadioButtonMenuItem2.setSelected(true);
                        jRadioButtonMenuItem1.setSelected(false);
                        jRadioButtonMenuItem3.setSelected(false);
                        jTreeQuestType.setText("Неальтернативный");
                    } else {
                            jRadioButtonMenuItem3.setSelected(true);
                            jRadioButtonMenuItem1.setSelected(false);
                            jRadioButtonMenuItem2.setSelected(false);
                            jTreeQuestType.setText("Иной");
                }
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };

    /*public void setDictionary(DictionaryInterface aDictionary) throws RemoteException{
        DI=aDictionary;
        DataRoot.setDictionary(DI.getID());
        if (DI!=null) {
            DItop.removeAllChildren();
            makeQuestBranches(DItop,DI);
        }
    }*/

    public void setDictionary(DictionaryInterface aDictionary) throws RemoteException{
        DI=aDictionary;
        DataRoot.setDictionary(DI.getID(),Lib.getID(),true);
        if (DI!=null) {
            if (DItop==null) {
                DItop = new ABSortTreeNode(new DictionaryMark(DI));
                //DItop = new DefaultMutableTreeNode(new DictionaryMark1(DI));
                makeQuestBranches(DItop,DI);
                top.insert(DItop, 0);
                //DItop.removeAllChildren();
                //DictionaryMark DM = new DictionaryMark(DI);
                //DataModuleInterface DMI= ((DataInfo) nodeInfo).getData();
                //DItop.setUserObject(DM);
                //makeQuestBranches(DItop,DI);
                jTree1.updateUI();
            }
        }
    }


    private void makeAnswerBranches(MutableTreeNode top,RInterface RQI) {
        try {
            QuestionInterface QI=Server.getMainDictionary().getQuestion(RQI.getID());
            AnswerMark AM;
            for (int i = 0; i < QI.getSize(); i++) {
                RInterface RAI=QI.getByPos(new Integer(i));
                AM=new AnswerMark(RAI,Server.getMainQuestion().getAnswer(RAI.getID()),RQI);
                ABSortTreeNode root=new ABSortTreeNode(AM);
                ((ABSortTreeNode)top).add(root);
            }
        } catch(Exception re ) {
            System.out.println("Фигня какая то в словарях и их ответах "+re.toString());
        }
    }

    private void makeQuestBranches(MutableTreeNode top,DictionaryInterface DI) {
        try {
            QuestMark QM=null;
            for (int i = 0; i < DI.getSize(); i++) {
                RInterface RQM=DI.getByPos(new Integer(i));
                QM=new QuestMark(RQM,Server.getMainDictionary().getQuestion(RQM.getID()),DI.getID());
                ABSortTreeNode root=new ABSortTreeNode(QM);
                makeAnswerBranches(root,RQM);
                ((ABSortTreeNode)top).add(root);
            }
        } catch(Exception re ) {
            System.out.println("Фигня какая то в словарях и их ответах "+re.toString());
        }
    }


    private MutableTreeNode getBranch(RInterface RDMI){
        ABSortTreeNode jTreeRoot=null;
        DefaultMutableTreeNode jTreeNode=null;
        try {
            DataModuleInterface root=Server.getDMI(RDMI.getID());
            jTreeRoot = new ABSortTreeNode(new DataModuleMark(RDMI,root,null));
            jTreeNode=jTreeRoot;
            if (root.getType()==2) {
                DefaultMutableTreeNode top;
                if (root.getDictionary()!=-1) {
                    DictionaryInterface DI = Server.getDictionary(root.getDictionary());
                    top = new ABSortTreeNode(new DictionaryMark(DI));
                    makeQuestBranches(top,DI);
                    jTreeRoot.add(top);
                    DItop=top;
                }
                DataModuleMark Difo=new DataModuleMark(RDMI,root,null);
                Difo.setVirtual(true);
                top = new ABSortTreeNode(Difo);
                jTreeRoot.add(top);
                jTreeNode=top;
            }
            int i=0;
            while (i<root.getSize()) {
                RInterface RI=(RInterface)root.getByPos(i);
                jTreeNode.add(getBranch(RI));
                i++;
            };
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
        return jTreeRoot;
    }

    public void initTree(RInterface aRDMI) {
        try {
            if ((RDMI==null)||(aRDMI.getID().compareTo(RDMI.getID())!=0)) {
                RDMI = aRDMI;
                DataRoot=Server.getDMI(RDMI.getID());
                DItop=null;
                top=(ABSortTreeNode)getBranch(RDMI);
                AutomatedTreeModel TreeMоdel= new AutomatedTreeModel(top);
                jTree1.setModel(TreeMоdel);
            }
        } catch(Exception re ) {
            System.out.println("Фигня какая то в словарях "+re.toString());
        }
    }

    public void setTree(DataModuleInterface DMI) {
        System.out.println("Переиничиваем дерево");

    }

    public void setTree() {
        System.out.println("Переиничиваем дерево");
    }

    public DictionaryInterface  cloneDictionary(DictionaryInterface aDI) {
        return null;
    }

    public QuestionInterface    cloneQuestion(QuestionInterface aQI) {
        return null;
    }

    public AnswerInterface      cloneAnswer(AnswerInterface aAI) {
        return null;
    }

    private void makeTree() {
        try {
            DefaultMutableTreeNode top = new DefaultMutableTreeNode(" - пусто - ");
            //jTree1.setModel(new DefaultTreeModel(null));
            jTree1.getSelectionModel().setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION);
            jTree1.setDragEnabled(true);
            
            DataModuleTreeTransferHandler DTFH=new DataModuleTreeTransferHandler();
            DTFH.setParent(this);
            jTree1.setTransferHandler(DTFH);

            //TreeTransferHandler TTH=new TreeTransferHandler();
            //TTH.Lib=Lib;
            //jTree1.setTransferHandler(TTH);
            DQATreeCellRenderer renderer = new DQATreeCellRenderer();
            jTree1.setCellRenderer(renderer);
            DQATreeCellEditor TCE = new DQATreeCellEditor(jTree1,Lib);
            jTree1.setCellEditor(TCE);

            InternalFrameEventDemo IFED= new InternalFrameEventDemo();
            jTree1.addFocusListener(IFED);

            MouseListener ml = new MouseAdapter() {
                public void mousePressed(MouseEvent e) {
                    DefaultMutableTreeNode node2;
                    DQAMarkInterface nodeInfo2;
                    int selRow = jTree1.getRowForLocation(e.getX(), e.getY());
                    TreePath selPath = jTree1.getPathForLocation(e.getX(), e.getY());
                    if(selRow != -1) {
                        if(e.getClickCount() == 2) {
                            node2 = (DefaultMutableTreeNode) selPath.getLastPathComponent();
                            if (node2 == null) return;
                            try {
                                nodeInfo2=(DQAMarkInterface)node2.getUserObject();
                                int i=nodeInfo2.getType();
                                switch (i) {
                                    case 3: { //datamodule
                                        //Lib.DetailFormAutomat(0);
                                        DataModuleMark Data = (DataModuleMark) nodeInfo2;
                                        //Lib.OpenEditForm(Data.getDMI(),DataRoot);
                                        System.out.println("Двойной клик на опросе "+nodeInfo2.getName());
                                        break;
                                    }
                                }
                            } catch(Exception re ) {
                                System.out.println("Фигня какая то в словарях "+re.toString());
                            }
                        }

                    }
                }
            };
            jTree1.addMouseListener(ml);

            TreeSelectionModel rowSM = jTree1.getSelectionModel();
            rowSM.addTreeSelectionListener(new TreeSelectionListener() {
                public void valueChanged(TreeSelectionEvent e) {
                    TreeSelectionModel lsm =(TreeSelectionModel)e.getSource();
                    if (lsm.isSelectionEmpty()) {
                    } else {
                        node = (DefaultMutableTreeNode) jTree1.getLastSelectedPathComponent();
                        if (node == null) return;
                        try {
                            //jTreeMenu=jTreeMenuItemRoot;
                            nodeInfo = (DQAMarkInterface)node.getUserObject();
                            int i=nodeInfo.getType();
                            switch (i) {
                                case 2: { //datamodule
                                    //Lib.setToolbarMode(2);
                                    jTreeMenu=jTreeMenuItemDataModule;
                                    /*if (DEPopened) {
                                        Lib.setTypeOfToolbar(1);
                                        DEPopened=false;
                                    }*/
                                    DataModuleMark Difo=(DataModuleMark) nodeInfo;
                                    DataModuleInterface DMI=(DataModuleInterface) Difo.getDMI();
                                    Lib.DataModuleConstr.setDMI(DMI);
                                    Integer DictIndex=(DMI.getDictionary());
                                    JMenuItem JMI= (JMenuItem) jTreeMenuItemDataModule.getComponent(0);
                                    if (DictIndex.intValue()>0) {
                                        JMI.setEnabled(false);
                                    } else {
                                        JMI.setEnabled(true);
                                    }
                                    Lib.DetailFormAutomat(1);
                                    break;
                                } case 3: { //datablock
                                    Lib.DetailFormAutomat(5);
                                    /*if (DEPopened) {
                                        Lib.setTypeOfToolbar(1);
                                        DEPopened=false;
                                    }*/
                                    //Lib.setToolbarMode(1);
                                    jTreeMenu=jTreeMenuItemDataBlock ;
                                    break;
                                } case 4: { //datafilter
                                    DataModuleMark Difo=(DataModuleMark) nodeInfo;
                                    DataModuleInterface DMI=(DataModuleInterface) Difo.getDMI();
                                    Lib.DEP.setDictionary(Server.getDictionary(DMI.getDictionary()));
                                    Lib.DetailFormAutomat(6);
                                    jTreeMenu=jTreeMenuItemDataFilter;
                                    JMenuItem JMI= (JMenuItem) jTreeMenuItemDataFilter.getComponent(4);
                                    JMI.setEnabled(DMI.isEditable());
                                    Lib.jFilterFormulaTextField1.setText(DMI.getComment());
                                    Lib.jFilterAcceptButton.setEnabled(false);
                                    break;
                                } case 5: { //datakeeper
                                    /*if (DEPopened) {
                                        Lib.setTypeOfToolbar(1);
                                        DEPopened=false;
                                    }*/
                                    //Lib.setToolbarMode(1);
                                    Lib.DetailFormAutomat(7);
                                    jTreeMenu=jTreeMenuItemData;
                                    DataModuleMark Difo=(DataModuleMark) nodeInfo;
                                    DataModuleInterface DMI=(DataModuleInterface) Difo.getDMI();
                                    Integer DictIndex=(DMI.getDictionary());
                                    JMenuItem JMI= (JMenuItem) jTreeMenuItemDataModule.getComponent(0);
                                    if (DictIndex.intValue()>0) {
                                        JMI.setEnabled(true);
                                    } else {
                                        JMI.setEnabled(false);
                                    }
                                    break;
                                }
                                case 0: { //Dictionary
                                    Lib.DetailFormAutomat(2);
                                    /*if (DEPopened) {
                                        Lib.setTypeOfToolbar(1);
                                        DEPopened=false;
                                    }*/
                                    jTreeMenu=jTreeMenuItemDictionary;
                                    DictionaryMark DM = (DictionaryMark)nodeInfo;
                                    JMenuItem JP=(JMenuItem)jTreeMenu.getComponent(3);
                                    JP.setEnabled(DM.getMixed());
                                    DictionaryIndex = DM.getID();
                                    break;
                                }
                                case 7: { //Question
                                    jTreeMenu=jTreeMenuItemQuestion;
                                    QuestMark QM = (QuestMark)nodeInfo;
                                    RefreshQuestType(QM.getQI());
                                    Lib.QuestConstr.setQuestion(QM.getQI());
                                    Lib.DetailFormAutomat(3);
                                    JMenuItem JP=(JMenuItem)jTreeMenu.getComponent(3);
                                    JP.setEnabled(QM.getMixed());
                                    break;
                                }
                                case 8: { //Answer
                                    Lib.DetailFormAutomat(4);
                                    AnswerMark AM = (AnswerMark)nodeInfo;
                                    //RefreshQuestType(QM.getQI());
                                    Lib.AnswerConstr.setAnswer(AM.getAI());
                                    /*if (DEPopened) {
                                        Lib.setTypeOfToolbar(1);
                                        DEPopened=false;
                                    }*/
                                    jTreeMenu=jTreeMenuItemAnswer;
                                    break;
                                }
                            }

                        } catch(Exception re ) {
                            if (!node.getUserObject().toString().equalsIgnoreCase("Все вопросы")) {
                                System.out.println("Фигня какая то в словарях "+re.toString());
                            }
                        }

                    }
                }
            });


        } catch(Exception re ) {

            System.out.println("Фигня какая то в словарях "+re.toString());
        }
    }

    private void OpenEditForm() {
        System.out.println("Ввод данных типа начинается");
        try {
            DefaultMutableTreeNode node1 = (DefaultMutableTreeNode) jTree1.getLastSelectedPathComponent();
            //DefaultMutableTreeNode node2 = node1.getPreviousNode();
            Object nodeInfo1 = node1.getUserObject();
            //Object nodeInfo2 = node2.getUserObject();
            DataModuleMark Data1 = (DataModuleMark) nodeInfo1;
            //DataModuleMark Data2 = (DataModuleMark) nodeInfo2;
            Lib.OpenEditForm(Data1.getRContent(),RDMI);
        } catch( Exception re ) {
            System.err.println("Ошибка инициализации окана 2"+re.toString());
        }
    }

    public INIACRMIInterface getServer() {
        return Server;
    }

    /*
        try {
            ABSortTreeNode TM2=(ABSortTreeNode) TM;
            DQAMarkInterface DQABranch1=(DQAMarkInterface)TM2.getUserObject();
            //type = DQABranch1.getType();
            switch (operation) {
                    case 1: { //удаление
                       int i=0;
                       int j=0;
                       javax.swing.tree.DefaultTreeModel DTM=(javax.swing.tree.DefaultTreeModel)jTree1.getModel();
                       while (i<TM2.getChildCount()) {
                           javax.swing.tree.DefaultMutableTreeNode DMT=(javax.swing.tree.DefaultMutableTreeNode)TM2.getChildAt(i);
                           DQAMarkInterface DQABranch2=(DQAMarkInterface)DMT.getUserObject();
                           j=0;
                           boolean Flag=true;
                           while (j<DQABranch1.getContent().getSize()&Flag) {
                               Flag=(DQABranch2.getContent().getID().compareTo(DQABranch1.getContent().getByPos(j).getID())!=0);
                               j++;
                           }
                           if (Flag) {
                               DTM.removeNodeFromParent(DMT);
                           } else {
                               j--;
                               if (i!=j) {
                                    RInterface RI=DQABranch1.getContent().getByPos(j);
                                    DQABranch1.getContent().getByPos(i).setPos(j);
                                    RI.setPos(i);
                               }
                               i++;
                           }
                       }
                       //TM2.nodeStructureChanged();
                       jTree1.updateUI();
                       break;
                    }
                    case 2: { //добавление
                       int i=0;
                       int j=0;
                       javax.swing.tree.DefaultTreeModel DTM=(javax.swing.tree.DefaultTreeModel)jTree1.getModel();
                       while (i<DQABranch1.getContent().getSize()){
                           j=0;
                           boolean Flag=true;
                           javax.swing.tree.DefaultMutableTreeNode DMT=null;
                           RInterface RDMI=DQABranch1.getContent().getByPos(i);
                           while ((j<TM2.getChildCount())&Flag) {
                                DMT=(javax.swing.tree.DefaultMutableTreeNode)TM2.getChildAt(j);
                                DQAMarkInterface DQABranch2=(DQAMarkInterface)DMT.getUserObject();
                                Flag=(DQABranch2.getContent().getID().compareTo(DQABranch1.getContent().getByPos(i).getID())!=0);
                                j++;
                           }
                           i++;
                           if (Flag) {
                               DQAMarkInterface DMM=DQABranch1.makeNewChildMark(RDMI.getID(),RDMI,Server);
                               //DefaultMutableTreeNode root=new DefaultMutableTreeNode(DMM);
                               //DefaultMutableTreeNode root=getBranch(DMM.getRContent(),(DataModuleMark)DQABranch1);
                               //DTM.insertNodeInto(root, TM2, i-1);
                               //DefaultMutableTreeNode DMTN =findBranch((DefaultMutableTreeNode)jTree1.getModel().getRoot(),RDMI.getID(),false);
                               //DefaultMutableTreeNode DMTN =findBranch((DefaultMutableTreeNode)jTree1.getModel().getRoot(),DMM.getRContent().getID(),false);
                               ABSortTreeNode DMTN =getBranch(DMM.getRContent(),(DataModuleMark)TM2.getUserObject());
                               DTM.insertNodeInto(DMTN, TM2, i-1);
                               DMTN.nodeChanged();

                           }
                       }
                       //TM2.nodeStructureChanged();
                       jTree1.updateUI();
                       break;
                    }
            }
        } catch(Exception re ) {
            System.out.println("Фигня какая то refreshBranch "+re.toString());
        }
      
          
     */    
    
    public void refreshBranch(javax.swing.tree.DefaultMutableTreeNode TM2, int operation) {
        try {
            DQAMarkInterface DQABranch1=(DQAMarkInterface)TM2.getUserObject();
            int type = DQABranch1.getType();
            switch (operation) {
                    case 1: {
                       int i=0;
                       int j=0;
                       javax.swing.tree.DefaultTreeModel DTM=(javax.swing.tree.DefaultTreeModel)jTree1.getModel();
                       while (i<TM2.getChildCount()) {
                           javax.swing.tree.DefaultMutableTreeNode DMT=(javax.swing.tree.DefaultMutableTreeNode)TM2.getChildAt(i);
                           DQAMarkInterface DQABranch2=(DQAMarkInterface)DMT.getUserObject();
                           j=0;
                           boolean Flag=true;
                           while (j<DQABranch1.getContent().getSize()&Flag) {
                               Flag=(DQABranch2.getContent().getID().compareTo(DQABranch1.getContent().getByPos(j).getID())!=0);
                               j++;
                           }
                           if (Flag) {
                               DTM.removeNodeFromParent(DMT);
                           } else {
                               j--;
                               if (i!=j) {
                                    RInterface RI=DQABranch1.getContent().getByPos(j);
                                    DQABranch1.getContent().getByPos(i).setPos(j);
                                    RI.setPos(i);
                               }
                               i++;
                           }
                       }
                       jTree1.updateUI();
                       break;
                    }
                    case 2: { //добавление
                       int i=0;
                       int j=0;
                       //AutomatedTreeModel DTM=(javax.swing.tree.DefaultTreeModel)jTree1.getModel();
                       AutomatedTreeModel DTM=(AutomatedTreeModel)jTree1.getModel();
                       while (i<DQABranch1.getContent().getSize()){
                           j=0;
                           boolean Flag=true;
                           javax.swing.tree.DefaultMutableTreeNode DMT=null;
                           RInterface RDMI=DQABranch1.getContent().getByPos(i);
                           while ((j<TM2.getChildCount())&Flag) {
                                DMT=(javax.swing.tree.DefaultMutableTreeNode)TM2.getChildAt(j);
                                DQAMarkInterface DQABranch2=(DQAMarkInterface)DMT.getUserObject();
                                Flag=(DQABranch2.getContent().getID().compareTo(DQABranch1.getContent().getByPos(i).getID())!=0);
                                j++;
                           }
                           i++;
                           if (Flag) {
                               DQAMarkInterface DMM=DQABranch1.makeNewChildMark(RDMI.getID(),RDMI,Server);
                               //DefaultMutableTreeNode root=new DвывefaultMutableTreeNode(DMM);
                               DefaultMutableTreeNode root=new ABSortTreeNode(DMM);   
                               if (type==0) {
                                   makeAnswerBranches(root,DMM.getRContent());
                               }
                               DTM.insertNodeInto(root, TM2, i-1);
                           }
                       }
                       jTree1.updateUI();
                       break;
                    }
            }
        } catch(Exception re ) {
            System.out.println("Фигня какая то в словарях и их ответах "+re.toString());
        }


    }


    private class DictionaryInfo {
        public DictionaryInterface DI;
        public DictionaryInfo(DictionaryInterface aDI) {
            DI = aDI;
        }
        public String toString() {
            String Name = "";
            try {
                Name=DI.getName();
            } catch( Exception re ) {
                System.out.println(re.toString());
            }
            return Name;
        }

        public Integer getID() {
            Integer ID = null;
            try {
                ID=DI.getID();
            } catch( Exception re ) {
                System.out.println(re.toString());
            }
            return ID;
        }
    }

    public void RefreshDictionaryList() throws RemoteException {
       try {
            int i=0;
            //DictionaryIndex=null;
            listDictionary.removeAllElements();
            ArrayList Keys=Server.getDictionaryKeys();
            while (i<Keys.size()) {
                listDictionary.addElement(new DictionaryInfo(Server.getDictionary((Integer)Keys.get(i))));
                i++;
            };
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    private void tuneComponent()  throws RemoteException {
        try {
            makeTree();
            createPopupMenu();
            createPopupMenu2();
            RadioListener myRadioListener = new RadioListener();


            jRadioButtonMenuItem1.setMnemonic(KeyEvent.VK_B);
            jRadioButtonMenuItem1.setActionCommand("1");
            jRadioButtonMenuItem1.setSelected(true);

            jRadioButtonMenuItem2.setMnemonic(KeyEvent.VK_C);
            jRadioButtonMenuItem2.setActionCommand("2");

            jRadioButtonMenuItem3.setMnemonic(KeyEvent.VK_D);
            jRadioButtonMenuItem3.setActionCommand("3");


            jRadioButtonMenuItem1.addActionListener(myRadioListener);
            jRadioButtonMenuItem2.addActionListener(myRadioListener);
            jRadioButtonMenuItem3.addActionListener(myRadioListener);

        } catch(Exception re ) {
        }


    }

    public void createPopupMenu() {

    }

    private void OpenDictionaryImportForm() {
        System.out.println("начинается импорт словаря");
        try {
            //DefaultMutableTreeNode node = (DefaultMutableTreeNode) jTree1.getLastSelectedPathComponent();
            //Object nodeInfo = node.getUserObject();
            //DataInfo Data = (DataInfo) nodeInfo;
            //DataModuleInterface DMI=Data.getData();
            Lib.OpenModuleImportForm(DataRoot,1);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    private void OpenModuleImportForm(int type) {
        System.out.println("начинается иморт данных");
        try {
            //DefaultMutableTreeNode node = (DefaultMutableTreeNode) jTree1.getLastSelectedPathComponent();
            //Object nodeInfo = node.getUserObject();
            DataModuleMark Data = (DataModuleMark) nodeInfo;
            DataModuleInterface DMI=Data.getDMI();
            Lib.OpenModuleImportForm(DMI,type);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    public void CreateDataBlock (int type, JTree jTree){
        try {
            String s="";
            DataModuleMark Data = (DataModuleMark) nodeInfo;            
            switch(type) {
                case 1: {
                    s="New folder";
                    break;
                }
                case 2: {
                    s="New datamodule";
                    break;
                }
                case 3: {
                    s="New datablock";
                    break;
                }
                case 4: {
                    if (!Data.getDMI().isEditable()) type=5;
                    s="New filter";
                    break;
                }
                case 5: {
                    s="New filter";
                    break;
                }
            }

            ABSortTreeNode node1 = (ABSortTreeNode) jTree.getLastSelectedPathComponent();
            Integer Key=Server.getKey();
            DataModuleInterface DMI = Server.newDMI(s,Key,type,true);
            DMI.setDictionary(Data.getDMI().getDictionary(),Lib.getID(),true);            
            Data.getDMI().addElement(DMI.getID(),Lib.getID(),true);
            DMI.createTable();
            DMI.setParent(Data.getDMI().getID(),Lib.getID(),true);
            refreshBranch(node1,2);
        } catch( Exception re ) {
            System.out.println("Ошибка "+re.toString());
        }
    }

    /*public void addDataBlock (DataModuleInterface DMI){
            DefaultMutableTreeNode node = (DefaultMutableTreeNode) jTree1.getLastSelectedPathComponent();
            Object nodeInfo=node.getUserObject();
            DefaultMutableTreeNode newnode = new DefaultMutableTreeNode(new DataModuleMark(DMI,(DataModuleMark)nodeInfo));
            javax.swing.tree.DefaultTreeModel DTM=(javax.swing.tree.DefaultTreeModel)jTree1.getModel();
            DTM.insertNodeInto(newnode, node, node.getChildCount());
    }*/


   /*
            DataModuleInterface DMI=Data.getData().AddRoot(s,type);
            DefaultMutableTreeNode newnode = new DefaultMutableTreeNode(new DataInfo(DMI,(DataInfo)nodeInfo));
            javax.swing.tree.DefaultTreeModel DTM=(javax.swing.tree.DefaultTreeModel)jTree.getModel();
            DTM.insertNodeInto(newnode, node, node.getChildCount());
            Server.WriteDictionaries();
        } catch( Exception re ) {
            System.out.println("Ошибка "+re.toString());
        }
    }*/


    private void OpenExportForm() {
        System.out.println("Экспорт данных типа начинается");
        try {
            DataModuleMark Data = (DataModuleMark) nodeInfo;
            DataModuleInterface DMI=Data.getDMI();
            Lib.OpenExportForm(DMI);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }

    public void OpenDimensionForm() {
        System.out.println("Построение измерений");
        try {
            DataModuleMark Data = (DataModuleMark) nodeInfo;
            Lib.OpenDimensionForm(Data.getRContent(),RDMI);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    }


    public void createPopupMenu2() {
        //JMenu menuItem;
        JMenuItem menuItem1;

        //jTreeMenuItemDataFolder =new JPopupMenu();
        jTreeMenuItemDataModule =new JPopupMenu();
        jTreeMenuItemDataBlock  =new JPopupMenu();
        jTreeMenuItemDataFilter =new JPopupMenu();
        jTreeMenuItemData       =new JPopupMenu();
        jTreeMenuItemDictionary =new JPopupMenu();
        jTreeMenuItemQuestion   =new JPopupMenu();
        jTreeMenuItemAnswer     =new JPopupMenu();
        jTreeQuestType =new JMenu("Тип вопроса:");


        //Create the popup menu.
        //JPopupMenu popup = new JPopupMenu();

        //Операции с опросом

        menuItem1 = new JMenuItem("Новый словарь");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 NewDictionary();
                 System.out.println("Создать");
             }
        });
        jTreeMenuItemDataModule.add(menuItem1);


        menuItem1 = new JMenuItem("Удалить");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 //DeleteDataBlock();
                 System.out.println("Удаляем блок данных");
             }
        });
        jTreeMenuItemDataModule.add(menuItem1);


        menuItem1 = new JMenuItem("Импортировать словарь");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Импорт");
                OpenDictionaryImportForm();
             }
        });
        jTreeMenuItemDataModule.add(menuItem1);


        // операция с множеством даных

        menuItem1 = new JMenuItem("Создать блок данных");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 CreateDataBlock(3,jTree1);
                 System.out.println("Создать");
             }
        });
        jTreeMenuItemData.add(menuItem1);

        menuItem1 = new JMenuItem("Создать фильтр");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 CreateDataBlock(5,jTree1);
                 System.out.println("Создать");
             }
        });
        jTreeMenuItemData.add(menuItem1);


        menuItem1 = new JMenuItem("Распределение");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                OpenDimensionForm();
                //System.out.println("Распределение");
             }
        });
        jTreeMenuItemData.add(menuItem1);

        menuItem1 = new JMenuItem("Импорт в новый блок данных");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Импорт");
                OpenModuleImportForm(2);
             }
        });
        jTreeMenuItemData.add(menuItem1);

        //Операции с блоком данных
        menuItem1 = new JMenuItem("Новый фильтр");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 CreateDataBlock(4,jTree1);
                 System.out.println("Создать");
             }
        });
        jTreeMenuItemDataBlock.add(menuItem1);

        //popup.add(menuItem1);
        menuItem1 = new JMenuItem("Удалить");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 Lib.DeleteDataBlock(jTree1);
                 System.out.println("Удаляем блок данных");
             }
        });
        jTreeMenuItemDataBlock.add(menuItem1);
        //popup.add(menuItem1);
        menuItem1 = new JMenuItem("Переименовать");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 //RenameDataBlock();
                 System.out.println("Переименовываем блок данных");
             }
        });
        //jTreeMenuItemDataBlock.add(menuItem1);

        menuItem1 = new JMenuItem("Импорт в существующий блок данных");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Считываю новый словарь ");
                OpenModuleImportForm(3);
             }
        });
        jTreeMenuItemDataBlock.add(menuItem1);

        menuItem1 = new JMenuItem("Экспорт");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Экспорт");
                OpenExportForm();
             }
        });
        jTreeMenuItemDataBlock.add(menuItem1);

        menuItem1 = new JMenuItem("Ввод данных");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Ввод данных");
                OpenEditForm();
             }
        });

        jTreeMenuItemDataBlock.add(menuItem1);


        menuItem1 = new JMenuItem("Распределение");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                OpenDimensionForm();
                //System.out.println("Распределение");
             }
        });
        jTreeMenuItemDataBlock.add(menuItem1);

         //Операции с блоком данных

        menuItem1 = new JMenuItem("Новый фильтр");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 CreateDataBlock(4,jTree1);
                 System.out.println("Создать");
             }
        });
        jTreeMenuItemDataFilter.add(menuItem1);


        menuItem1 = new JMenuItem("Удалить");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 Lib.DeleteDataBlock(jTree1);
                 System.out.println("Удаляем блок данных");
             }
        });
        jTreeMenuItemDataFilter.add(menuItem1);
        menuItem1 = new JMenuItem("Переименовать");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 //RenameDataBlock();
                 System.out.println("Переименовываем блок данных");
             }
        });
        jTreeMenuItemDataFilter.add(menuItem1);

        menuItem1 = new JMenuItem("Экспорт");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Экспорт");
                OpenExportForm();
             }
        });
        jTreeMenuItemDataFilter.add(menuItem1);

        menuItem1 = new JMenuItem("Ввод данных");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                System.out.println("Ввод данных");
                OpenEditForm();
             }
        });
        jTreeMenuItemDataFilter.add(menuItem1);

        menuItem1 = new JMenuItem("Распределение");
        menuItem1.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                OpenDimensionForm();
                //System.out.println("Распределение");
             }
        });
        jTreeMenuItemDataFilter.add(menuItem1);


        ///from Qep




        JMenuItem menuItem;
        menuItem = new JMenuItem("Новый словарь");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 NewDictionary();
                 System.out.println("Новый словарь");
             }
        });

        //jTreeMenuItemRoot.add(menuItem);

        menuItem = new JMenuItem("Новый вопрос");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 //NewDictionary();
                 NewQuestion();
                 System.out.println("Добавить вопрос");
             }
        });
        jTreeMenuItemDictionary.add(menuItem);

        menuItem = new JMenuItem("Удалить словарь");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 try {
                    DeleteDictionary();
                    System.out.println("Удаляем словарь");
                 } catch( Exception re ) {
                    System.out.println(re.toString());
                 }
             }
        });
        jTreeMenuItemDictionary.add(menuItem);
        jTreeMenuItemDictionary.addSeparator();

        menuItem = new JMenuItem("Перекодировать словарь");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 try {
                    RecodeDictionary();
                    System.out.println("Перекодируем словарь");
                 } catch( Exception re ) {
                    System.out.println(re.toString());
                 }
             }
        });
        menuItem.setEnabled(false);
        jTreeMenuItemDictionary.add(menuItem);

        menuItem = new JMenuItem("Новый ответ");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 NewAnswer();
                 System.out.println("Добавить ответ");
             }
        });
        jTreeMenuItemQuestion.add(menuItem);

        menuItem = new JMenuItem("Удалить вопрос");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 try {
                    DeleteQuest();
                    System.out.println("Удаляем вопрос");
                 } catch( Exception re ) {
                    System.out.println(re.toString());
                 }
             }
        });
        jTreeMenuItemQuestion.add(menuItem);
        jTreeMenuItemQuestion.addSeparator();

        menuItem = new JMenuItem("Перекодировать вопрос");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 try {
                    RecodeQuestion();
                    System.out.println("Перекодируем вопрос");
                 } catch( Exception re ) {
                    System.out.println(re.toString());
                 }
             }
        });
        menuItem.setEnabled(false);
        jTreeMenuItemQuestion.add(menuItem);
        jRadioButtonMenuItem1 = new JRadioButtonMenuItem("Альтернативная");
        jTreeQuestType.add(jRadioButtonMenuItem1);
        jRadioButtonMenuItem2 = new JRadioButtonMenuItem("Неальтернативная");
        jTreeQuestType.add(jRadioButtonMenuItem2);
        jRadioButtonMenuItem3 = new JRadioButtonMenuItem("Иная");
        jTreeQuestType.add(jRadioButtonMenuItem3);
        jTreeMenuItemQuestion.add(jTreeQuestType);

        menuItem = new JMenuItem("Удалить ответ");
        menuItem.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e)  {
                 try {
                    DeleteAnswer();
                    System.out.println("Удаляем ответ");
                 } catch( Exception re ) {
                    System.out.println(re.toString());
                 }
             }
        });
        jTreeMenuItemAnswer.add(menuItem);


        //Add listener to the text area so the popup menu can come up.
        MouseListener popupListener = new PopupListener(jTreeMenu);
        jTree1.addMouseListener(popupListener);
    }

    class PopupListener extends MouseAdapter {
        JPopupMenu popup;

        PopupListener(JPopupMenu popupMenu) {
            popup = popupMenu;
        }

        public void mousePressed(MouseEvent e) {
            maybeShowPopup(e);
        }

        public void mouseReleased(MouseEvent e) {
            maybeShowPopup(e);
        }

        private void maybeShowPopup(MouseEvent e) {
            if (e.isPopupTrigger()) {
                jTreeMenu.show(e.getComponent(),
                           e.getX(), e.getY());
            }
        }
    }

    public void Register () {
 	System.out.println( "Зарегистрировался" );
    }

    public void DeleteAnswer() {
        try {
            DQAMarkInterface DQABranch1=(DQAMarkInterface)node.getUserObject();
            AnswerMark AM = (AnswerMark)DQABranch1;
            DefaultMutableTreeNode Parent = (DefaultMutableTreeNode)node.getParent();
            QuestMark QM =(QuestMark)Parent.getUserObject();
            QM.getQI().delByID(AM.getID(),Lib.getID(),true);
            refreshBranch(Parent,1);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };


    public void DeleteQuest() {
        try {
            DQAMarkInterface DQABranch1=(DQAMarkInterface)node.getUserObject();
            QuestMark QM = (QuestMark)DQABranch1;
            DefaultMutableTreeNode Parent = (DefaultMutableTreeNode)node.getParent();
            DictionaryMark DM =(DictionaryMark)Parent.getUserObject();
            Server.getDictionary(DM.getID()).delByID(QM.getID(),Lib.getID(),true);
            refreshBranch(Parent,1);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };

    public void DeleteDictionary() {
        try {
            Server.DeleteDictionary(DictionaryIndex);
            refreshBranch((DefaultMutableTreeNode)jTree1.getModel().getRoot(),1);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };


    public void RenameAnswer() {
        try {
            //String AnswerName = MF.GetStringValue(Question.getAnswer(AnswerID).getName(),"Введите формулировку ответа");
            //Question.getAnswer(AnswerID).setName(AnswerName);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };

    public void RecodeQuestion() {
        try {
            refreshBranch(node,1);
            QuestMark QM = (QuestMark)node.getUserObject();
            QM.setMixed(false);
            Server.StoreDQА(QM.getQI(),3);
            JMenuItem JP=(JMenuItem)jTreeMenu.getComponent(3);
            JP.setEnabled(false);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };

    public void RecodeDictionary() {
        try {
            refreshBranch(node,1);
            DictionaryMark DM = (DictionaryMark)node.getUserObject();
            /*int i=0;
            while (i<node.getChildCount()) {
                javax.swing.tree.DefaultMutableTreeNode DMT=(javax.swing.tree.DefaultMutableTreeNode)node.getChildAt(i);
                DQAMarkInterface DQABranch2=(DQAMarkInterface)DMT.getUserObject();
                QuestMark QM=(QuestMark)DQABranch2;
                QM.getRContent().setPos(i);
                i++;
            }*/

            DM.setMixed(false);
            Server.StoreDQА(DM.getQI(),2);            
            JMenuItem JP=(JMenuItem)jTreeMenu.getComponent(3);
            JP.setEnabled(false);
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };

    public void importDictionary() {
        try {
            System.out.println("Считываю новый словарь ");
            //makeTree();
        } catch( Exception re ) {
            System.out.println(re.toString());
        }
    };


    
    private void jList1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jList1FocusGained
        // Add your handling code here:
    }//GEN-LAST:event_jList1FocusGained

    private void jTree1InputMethodTextChanged(java.awt.event.InputMethodEvent evt) {//GEN-FIRST:event_jTree1InputMethodTextChanged
        // TODO add your handling code here:
        System.out.println("Что то вводим");
    }//GEN-LAST:event_jTree1InputMethodTextChanged

    

    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel DictionaryPanel;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane4;
    public javax.swing.JTree jTree1;
    // End of variables declaration//GEN-END:variables
    
       

    
}
